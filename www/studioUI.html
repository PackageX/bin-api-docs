<html>

<head>
  <!-- boxitnow CSS -->
  <!--   <link rel="stylesheet" type="text/css" href="http://localhost/boxitnow/css/bin.cache.min.css" /> -->
  <!--<link rel="stylesheet" type="text/css" href="https://staging-fantastapack.boxitnow.com/css/bin.cache.min.css" /> -->
   <!-- <link rel="stylesheet" type="text/css" href="https://efidocker.boxitnow.com/css/bin.cache.min.css" /> -->

  <!-- boxitnow JS -->
    <!--  <script type="text/javascript" src="http://localhost/boxitnow/js/bin.bootstrap.js"></script> -->
<!--  <script type="text/javascript" src="https://staging-fantastapack.boxitnow.com/js/bin.bootstrap.js"></script> -->
   <!-- <script type="text/javascript" src="https://efidocker.boxitnow.com/js/bin.bootstrap.js"></script> -->


<!--<link rel="stylesheet" type="text/css" href="https://baycities.boxitnow.com/css/bin.cache.min.css" />
   <script type="text/javascript" src="https://baycities.boxitnow.com/js/bin.bootstrap.js"></script> -->


  <!-- <link rel="stylesheet" type="text/css" href="http://10.140.1.17/css/bin.cache.min.css" />
      <script type="text/javascript" src="http://10.140.1.17/js/bin.bootstrap.js"></script> -->


         <link rel="stylesheet" type="text/css" href="http://localhost/css/bin.cache.min.css" />
            <script type="text/javascript" src="http://localhost/js/bin.bootstrap.js"></script>

  <!-- CLIENT CSS -->
  <!--<link rel="stylesheet" type="text/css" href="spectrum.css" />-->
  <style>
  	body {
    	margin: 0;
    	font-family: arial;
	}

	#header {
	    width: 100%;
	    text-align: center;
	    line-height: 150px;
	    height: 150px;
	    font-size: 30px;
	    border: 1px solid #444;
	    box-sizing: border-box;
	}

	#body {
	    min-height: 800px;
	    border: 0px solid #444;
	    position: relative;
	    box-sizing: border-box;
	}

	#tab {
	    position: absolute;
	    left: 0;
	    width: 20%;
	    top: 0;
	    bottom: 0;
	    border: 1px solid #444;
	    text-align: center;
	    line-height: 150px;
	    font-size: 30px;
	    box-sizing: border-box;
	}

	#studio, #viewer {
	    position: absolute;
	    right: 0;
	    width: 80%;
	    top: 0;
	    bottom: 0;
	    border: 1px solid #444;
	    box-sizing: border-box;
	    overflow: hidden;
	}

	#footer {
	    width: 100%;
	    text-align: center;
	    line-height: 150px;
	    height: 150px;
	    font-size: 30px;
	    border: 1px solid #444;
	    box-sizing: border-box;
	}


  .bin-widget div#graphics.section .accordion input:checked~.article.ac-colorSettings.tallWindow{

    height:200px;

  }


</style>

  <!-- CLIENT JS -->

  <!-- You can pre load the following, BIN will load if they are not already loaded -->
  <script type="text/javascript" src="//code.jquery.com/jquery-2.1.3.js"></script>
  <!--<script type="text/javascript" src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>-->
  <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r72/three.js"></script>-->
  <!--<script type="text/javascript" src="spectrum.js"></script>-->

  <!-- EXAMPLE USER INTEGRATION SCRIPT -->
  <script>

//TODO: 1
//this is always blank?

  </script>


  <!-- EXAMPLE LOAD/CREATE SCRIPT -->
  <script>

  function decode(s) {
    return decodeURIComponent(s.split("+").join(" "));
  }

  var urlVars = {};
  document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g, function () {

    urlVars[decode(arguments[1])] = decode(arguments[2]);

    console.log(urlVars);

  });



  var newId = urlVars['id'] ? urlVars['id'] : 329;// 5882;//79;//4437;//4437; //136;//1403;//79;//1378;//7394;//1177;//"71c77070a59550b3ccb77aea0aef9be5";

  var newType = urlVars['type'] ? urlVars['type'] : "standard";//"user";//'user';//'user';

  var newToken = urlVars['token'] ? urlVars['token'] : "362d4a80b9e088fc42457871eed91ac4";//"041cad0f67a40438b7bba5ad8e41b617";//"dbdf066cb4eee079447a79b7b2985599";//"dc7ff5e424ec7239ee8ccf055cd2239c";//;"24b5761974dae38e17d327106ce96f72";//'bb18fee24181484588313068efcbbc44';


    //LOAD bin libraries
    BIN.Bootstrap.load({
      //the root of the BIN HOST site
      /*apiUrl: "https://staging-fantastapack.boxitnow.com/",*/


  /*    apiUrl: "https://baycities.boxitnow.com/",
      apiKey: "4023C76352B821724D097B72A116E788" */

  /*   apiUrl: "https://efidocker.boxitnow.com/",
      apiKey: "tBCVmR9e7NdzwN8K" */

    /*  apiUrl: "https://boxesinc.boxitnow.com/",
            apiKey: "RAlDxCFOPGwX2yfWpvVtpNIN0E9HkOAM" */


      /*apiUrl: "http://dev.boxitnow.com/",
            apiKey: "VGL6TmfXuFMprVPy" */


            apiUrl: "http://localhost/boxitnow/",
          //  apiUrl: "https://binalpha.boxitnow.com/",
      apiKey: "VGL6TmfXuFMprVPy"

      /*apiUrl: "http://10.140.1.17/",
      apiKey: "tBCVmR9e7NdzwN8K"*/

    }, function() {

      //Begin create studio
      BIN.Widgets.Create({
        //can be: 'viewer' (3d viewer), 'studio' (3d design studio) , 'boxes' (My Boxes), 'media' (Media Manager)
        type: 'studio',
        //(require) Html div to attach the widget to
        tag: $('#studio'),
        //(optional) required if loading user design, user media or user projects
        userToken: newToken,
        //(require for design studio)design information to load
        design: {
          //(require) 'standard' or 'user'
          type: newType,
          //(require) id of item or resize
          id: newId,
          //(optional)

          //(optional) 'imperial' or 'metric'
          //unitSystem: 'imperial',

          //optional -  Generate new design from id - "save As" (trigger resize on load)
          isTemplate: false,

          //(optional) 'vertical' or 'horizontal'
          //default/null : vertical
          fluting: 'horizontal',


          //TODO: 2
          //How to show number of options here?
          //Full list, more options, example params?
        //  parameters: {
            //Length: "15.1",
        /*    Bottleheight: "10.1",
            Bottleh: "11.1",
            BOTTLEHEIGHT: "14.3",
            BOTTLEH: "16.2",
            Front: "12",
            FRONT: "12.5",
            Width: "13",*/
          //  Finish: "Kraft",
          //  Allowance: ".5"
      //  }
          //Probalby more than Length, Width, Depth, depending on design.
          //Null value? (not included)
          //default values? (for params that are not included)
        },

        //(optional) for loading for design studio
        options: {

              user: {
                saving: 'simple'
                //TODO: 3
                //'simple' saving does not require a folder selection
                //what is the other type?
                //null value? (not included)
                //default value (invalid, incorrect param)
              },
              defaultLayout: {
                showScores: false
                //TODO: 4a
                //more?
              },
              ui: {
                // corresponds to resizer, export, graphics views
                initialTab: 'graphics', //{'measurements', 'graphics', 'export'}
                saveButtonText: 'SAVE DESIGN',
                saveProgressText: 'Saving...',
                saveFinishText: 'DESIGN SAVED',
                //TODO: 4b
                //default and null values?

                studio : {

                  info :
                                {
                                      register : 'Register',
                                      singup : 'Sign Up',
                                      usernameEmail : 'Username or Email',
                                      password : 'Password',
                                      view : 'View:',
                                      screenshotTooltip : 'Save Box Screenshot',
                                },
                  menu :
                                {
                                      delete : 'Delete1',
                                      forward : 'Bring Forward',
                                      front : 'Bring to Front',
                                      backward : 'Send Backward',
                                      back : 'Send To Back',
                                    }
                        ,

                  ie :
                              {
                                    title : 'Sorry...',
                                    label : 'The mainfollowing:',
                                    chrome : 'Chrome',
                                    firefox : 'Firefox',
                                    edge : 'Edge/Safari',

                              }
                      ,

                  loading :

                              {
                                    data : 'Loading Data',
                                    resize : 'Resizing Your Design',
                                    printos : 'Exporting Your Design',
                                    export : 'Exporting Your Design',
                                    export2 : 'May take a few minutes...',
                                    loading : 'Loading 3D Design',
                                    error : 'WebGl is not en this feature.',

                            },


                  panel :

                              {
                                    inside : 'Inside View',
                                    insideLabel : 'Choose a cove color.',
                                    outside : 'Outside View',
                                    outsideLabel : 'Choose a color and ove color.',

                              },


                  details :

                              {
                                    client : 'Client123',
                                    quantity : 'Quantity',
                                    projectname : 'Project Name',
                                    description : 'Description',
                                    notes : 'Notes123',
                                    pdfpreview : 'PDF Preview123',
                                    edit : 'Edit',
                                }
                    ,


                  legend :

                            {
                                  more : 'more...',
                                  shiftDrag : 'ShGraphic',
                                  delete : 'DEL/BKSP: Delete Graphic',
                                  save : 'Ctrl+S: Save Design',
                                  mouseTitle : 'Mouse Actions:',
                                  keyTitle : 'Key Commands:',
                                  doubleClick : 'Double-Click: Fold/Unfold',
                                  dragMouse : 'Drag Mouse on Design: Rotate 3D',
                                  mouseWheel : 'Mouse Wheel: Zoom 3D',
                                  rightClick : 'Right-Click on a Graphic: Show Element Options',
                                  arrows : 'Arrows: Move Graphic',
                                  duplicate : 'Ctrl+D: Duplicate Graphic',
                                  lines : 'L: Toggle Score Lines',

                            },


                },


                cad : {

                    info : {

                        outsideView : 'Outside View123',
                        toggleDimensionOff : 'Show Without Dimensions',
                        toggleDimensionOn : 'Show with Dimensions',

                    }
                },


                resizer : {

                    info :  {

                        title : 'Measurements123',
                        label : 'View Conversion Chart123',
                        labelHint : 'Conversion Chart123',
                        resetHint : 'Reset Value',
                        warning : '* Resize required to apply changes. *',
                        warning2 : '* Very Large Boxes may not be supported*',
                        fieldError : 'This field ase try again',
                        select : 'Select a material',
                        custom : 'Custom',
                        title2 : 'Advanced',
                        resize : 'Resize123',
                        resizeLoading : 'Resizing Your Design',
                        convertInches : 'Convert to Inches',
                        convertMetric : 'Convert to Metric',

                        }
                          ,
                    parameters :  {

                        finish : 'Finish123',
                        finishSelect : 'Select a Finish123',
                        material : 'Board Type',
                        materialSelect : 'Select a Board Type',
                        allowance : 'Allowance123',
                        length : 'Length123',
                        width : 'Width123',
                        depth : 'Depth123',

                                  }
                    },

                  graphics : {

                      user : {

                        title : "My Graphics123entr√©es",
                        upload: "Choose Graphic",
                        accepted: "Accepted Filetypes: JPEG,JPG,PNG,SVG,PDF",

                      },

                      standard : {

                        title : "Standard Graphics",

                      },

                      text : {

                        title : "Add Text",
                        label: "Text",
                        font: "Font",
                        color: "Color",
                        bold: "Bold",
                        italic: "Italic",
                      },

                      pattern : {

                        title : "Color Settings & Patterns123",
                        outsideColor: "Outside Color123",
                        outsidePattern: "Outside Pattern123",
                        insideColor: "Inside Color123",
                        insidePattern: "Inside Pattern123",
                        showScores: "Show Scores123",
                        horizontal: "Horizontal Shift123",
                        vertical: "Vertical Shift123",
                        scale: "Scale123",
                        rotation: "Rotation123",
                        reset: "Reset Valu123e",
                        none : "None123",
                        close : "Close123",

                      },

                      panel : {

                        title : "Panel Color",
                        label: "Panel Color",
                        instruction: "Choose a color e color.",
                        buttonOutside: "Remove All (Outside)",
                        buttonInside: "Remove All (Inside)",

                      },


                      litho : {

                        title : "Full Page Graphics",
                        label: "Available for Outside Graphics Only",
                        instructions: "Instructions",
                        upload: "Choose Graphic",

                      },




                      nonstandard: {

                        title : "Line Graphics",

                      },


                  },


                  export : {
                      info :
                                    {
                                          title : '',
                                          label : '',
                                          loading : 'Exporting...',
                                          saved : 'You must save the design to email files.',
                                          empty : 'No Settinistrator.',

                                    }
                            ,

                      email :
                                    {
                                          title : 'Email Files',
                                          name : 'Name for Files',
                                          email : 'Email To',
                                          subject : 'Subject',
                                          details : 'Details',
                                          zip : 'Zip Files',
                                          action : 'Send Email',

                                    }
                            ,

                      share :
                                    {
                                          title : 'Share a Link',
                                          email : 'Email',
                                          action : 'Share Link',

                                    }
                            ,

                      title :
                                    {
                                          title : 'Upload to FTP',
                                          action : 'Upload to FTP',

                                    }
                            ,

                      printos :
                                    {
                                          title : 'Share a Link',
                                          apiKey : 'API Key',
                                          apiSecret : 'API Secret',
                                          action : 'Export',
                                          error : 'No Key Secret Field',
                                          uploadSuccess : 'Successfully Uploaded.',
                                          uploadError : 'Upload Failed. P try again.',
                                          connectionError : 'Connection Failed.again.'

                                    }
                            ,

                      download :
                                    {
                                          title : 'Download Files',
                                          hint : 'Download File Type',
                                          action : 'Download Files',
                                          error : 'No Files Selected',

                                    }
                            ,
                      },





              },
              resizer: {
                //TODO: 5
                enabled: true,
                readonly: false,
                editFluting: true,
                modules: [], //options here?
                trimParams: true //not sure what this does
              },

              export: {
                //TODO: 6
                enabled: true,
                modules: ['mod_share', 'mod_ftp', 'mod_xmpie'] //other options? printos?
                //ftp is disabled in general?
                //these are also (possibly only) controlled in the admin site settings
              },
              graphics: {
                //TODO: 7
                enabled: true,
                useKraft: false, //not sure what this does
                modules: ['mod_standard', 'mod_graphics', 'mod_text', 'mod_panel', 'mod_litho', 'mod_color', 'mod_pattern' ]
                //null value (not included): all enabled
                //default value ([]): all disabled
                //specified value (['x', 'y']) : x, y enabled; z disabled;
              },
              views: {
                //TODO: 8
                '3d': '3D123',
                'outside': 'Outside View',
                'inside': 'Inside View',
                'cad': null,
                'details': null,
                'fullscreen': null,
                '2nd_view': null
                //null value (not included) : enabled, default title
                //default value (null) : disabled
                //specified value ('X View') : enabled, title 'X View'
              },

              tabs: {
                resizer : 'Default Dimensions123',
                graphics : 'Default Graphics',
                export : 'Default <br /> Share',
              },

              //TODO: 9
              //not entirely sure what form refers to generally
              form: {
                fields: {

                },
                hideAdvancedDims: true
              },
              finishes: {
                //TODO: 9
                enable: true,
              //  label: 'Materials', //label default/null values?
                options: {
                  'Standard White': { //mapping?? 'Standard White' is what value/title/name
                    renderBase: '#ff0000',  //renderbase default/null values?
                    interior: 'white',  //interior default/null values?
                    //null renderSurface : default/null values?

                  },
                  'Premium White': {
                    renderBase: 'color',
                    interior: 'white',
                    renderBaseColor: "#ff0000"
                  },
                  'Premium White with Gloss Ink Finish': {
                    renderBase: 'kraft',
                    renderSurface: 'gloss',
                    interior: 'white',
                  },
                  'Kraft': {
                    // double sided kraft //TODO:10 Why does this make it double sided kraft?
                    renderBase: 'kraft',
                    isDefault: 'true'

                  }
                }
              },
              //TODO: 11
              //Finishes/Materials naming convention...
              //The only reason I can keep this straight is because I think of them as the two different dropdowns
              //but they should follow a more divisive naming convention

              //default/null value?
              materials: {
                enable: true
              }
            },



          //TODO: 12
          //Function event fires before or after action ( on success/error)?
          //e.g. buttonClick onSave or function return onSave?
    		onSave : function(userSessionHandle, parameters) {

          console.log(parameters);





          onSaveAction();

    		},

        //(optional)after studio is loaded
        onLoad: function(userSessionHandle) { //TODO: 13 not sure what userSessionHandle is supposed to have

          console.log(userSessionHandle);
          console.log("onLoad called");

          //$('#Params_Finish').trigger('change');



        },

        //(optional)user does a resize
        //TODO: 14
        //Function event fires before or after action ( on success/error)?
        onResize: function(userSessionHandle, parameters) {
          console.log(parameters);
          //alert(parameters.resizeToken);

          console.log("RESIZED CALLBACK");
        },

        //(required)
        //TODO: 15
        //onExport says 'required', but is not implemented anywhere (and doesn't seem to have a problem with that)
        //Are there any parameters for this function call?
        //Function event fires before or after action ( on success/error)?
        //
        /*
        onExport: function() {},
        */


        onTabsReady : function(state) {

          console.log("STATE IS :" + state);


    		},

        onTabsReadyAll : function(state) {

          console.log("STATE IS :" + state);

          if(document.getElementById('useInsideGraphics').value == 1){
              var x = $('.article.ac-colorSettings');
               $(x).addClass("tallWindow");
             }

    		},



      });
    });
  </script>
  <title>Page</title>
</head>

<body>
  <!-- BEGIN PAGE -->
  <div id='header'>

    <div id="nav" data-include="nav"></div>

  </div>


  <div id='body'>


    <div id='studio'></div>


    <div id="newUI">

      <button id="newSave">SAVE</button>

      <button id="newSaveAs">Save AS</button>

    </div>

  </div>

  <div id='footer'>
    footer
  </div>
  <!-- END PAGE -->



  <script type='text/javascript' src="js/dataInclude.js" ></script>

  <script>

  var response = -1;

  $(document).on('ready', function () {

    $('#newSave').on('click', function(){

      response = 0;
      console.log("New Save clicked"+response);
      $('.save_button').click();

    });

    $('#newSaveAs').on('click', function(){

      response = 1;
      console.log("New Save AS clicked"+response);
      $('.save_button').click();

    });


  });



  function onSaveAction(){

    console.log("Save ACTION called!" + response);

    if(response == 0){
      console.log("Response 0");
    }

    else if(response == 1){
      console.log("Response 1");

      window.reload();
    }

    else{
      console.log("Response NONE");
    }


  }


  </script>
</body>

</html>
