<html>

<head>
  <!-- boxitnow CSS -->
    <link rel="stylesheet" type="text/css" href="http://localhost/boxitnow/css/bin.cache.min.css" />
  <!--<link rel="stylesheet" type="text/css" href="https://staging-fantastapack.boxitnow.com/css/bin.cache.min.css" /> -->
  <!-- <link rel="stylesheet" type="text/css" href="https://efidocker.boxitnow.com/css/bin.cache.min.css" /> -->

  <!-- boxitnow JS -->
  <!--   <script type="text/javascript" src="http://localhost/boxitnow/js/bin.bootstrap.js"></script> -->
<!--  <script type="text/javascript" src="https://staging-fantastapack.boxitnow.com/js/bin.bootstrap.js"></script> -->
    <script type="text/javascript" src="https://baycities.boxitnow.com/js/bin.bootstrap.js"></script>
    <!--<script type="text/javascript" src="https://boxesinc.boxitnow.com/js/bin.bootstrap.js"></script> -->

  <!-- CLIENT CSS -->
  <!--<link rel="stylesheet" type="text/css" href="spectrum.css" />-->
  <style>
  	body {
    	margin: 0;
    	font-family: arial;
	}

	#header {
	    width: 100%;
	    text-align: center;
	    line-height: 150px;
	    height: 150px;
	    font-size: 30px;
	    border: 1px solid #444;
	    box-sizing: border-box;
	}

	#body {
	    min-height: 800px;
	    border: 0px solid #444;
	    position: relative;
	    box-sizing: border-box;
	}

	#tab {
	    position: absolute;
	    left: 0;
	    width: 20%;
	    top: 0;
	    bottom: 0;
	    border: 1px solid #444;
	    text-align: center;
	    line-height: 150px;
	    font-size: 30px;
	    box-sizing: border-box;
	}

	#studio, #viewer {
	    position: absolute;
	    right: 0;
	    width: 80%;
	    top: 0;
	    bottom: 0;
	    border: 1px solid #444;
	    box-sizing: border-box;
	    overflow: hidden;
	}

	#footer {
	    width: 100%;
	    text-align: center;
	    line-height: 150px;
	    height: 150px;
	    font-size: 30px;
	    border: 1px solid #444;
	    box-sizing: border-box;
	}


  .bin-widget div#graphics.section .accordion input:checked~.article.ac-colorSettings.tallWindow{

    height:200px;

  }


</style>

  <!-- CLIENT JS -->

  <!-- You can pre load the following, BIN will load if they are not already loaded -->
  <script type="text/javascript" src="//code.jquery.com/jquery-2.1.3.js"></script>
  <!--<script type="text/javascript" src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>-->
  <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r72/three.js"></script>-->
  <!--<script type="text/javascript" src="spectrum.js"></script>-->

  <!-- EXAMPLE USER INTEGRATION SCRIPT -->
  <script>

//TODO: 1
//this is always blank?

  </script>


  <!-- EXAMPLE LOAD/CREATE SCRIPT -->
  <script>

  function decode(s) {
    return decodeURIComponent(s.split("+").join(" "));
  }

  var urlVars = {};
  document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g, function () {

    urlVars[decode(arguments[1])] = decode(arguments[2]);

    console.log(urlVars);

  });



  var newId = urlVars['id'] ? urlVars['id'] : 2971;//79;//9147;//79;//4437;//4437; //136;//1403;//79;//1378;//7394;//1177;//"71c77070a59550b3ccb77aea0aef9be5";

  var newType = urlVars['type'] ? urlVars['type'] : "user";//"standard";//"user";//'user';//'user';

  var newToken = urlVars['token'] ? urlVars['token'] : "dbdf066cb4eee079447a79b7b2985599";//"041cad0f67a40438b7bba5ad8e41b617";//"dbdf066cb4eee079447a79b7b2985599";//"dc7ff5e424ec7239ee8ccf055cd2239c";//;"24b5761974dae38e17d327106ce96f72";//'bb18fee24181484588313068efcbbc44';


    //LOAD bin libraries
    BIN.Bootstrap.load({
      //the root of the BIN HOST site
      /*apiUrl: "https://staging-fantastapack.boxitnow.com/",*/


      apiUrl: "https://baycities.boxitnow.com/",
      apiKey: "4023C76352B821724D097B72A116E788"

  /*   apiUrl: "https://efidocker.boxitnow.com/",
      apiKey: "tBCVmR9e7NdzwN8K" */

    /*  apiUrl: "https://boxesinc.boxitnow.com/",
            apiKey: "RAlDxCFOPGwX2yfWpvVtpNIN0E9HkOAM" */


      /*apiUrl: "http://dev.boxitnow.com/",
            apiKey: "VGL6TmfXuFMprVPy" */


    /*        apiUrl: "http://localhost/boxitnow/",
      apiKey: "VGL6TmfXuFMprVPy" */

    }, function() {

      //Begin create studio
      BIN.Widgets.Create({
        //can be: 'viewer' (3d viewer), 'studio' (3d design studio) , 'boxes' (My Boxes), 'media' (Media Manager)
        type: 'studio',
        //(require) Html div to attach the widget to
        tag: $('#studio'),
        //(optional) required if loading user design, user media or user projects
        userToken: newToken,
        //(require for design studio)design information to load
        design: {
          //(require) 'standard' or 'user'
          type: newType,
          //(require) id of item or resize
          id: newId,
          //(optional)

          //(optional) 'imperial' or 'metric'
          //unitSystem: 'imperial',

          //optional -  Generate new design from id - "save As" (trigger resize on load)
          //isTemplate: false,

          //(optional) 'vertical' or 'horizontal'
          //default/null : vertical
          fluting: 'horizontal',


          //TODO: 2
          //How to show number of options here?
          //Full list, more options, example params?
          parameters: {
            "Length":"10","Width":"10","Depth":"8","Allowance":"0.1875"
        }
          //Probalby more than Length, Width, Depth, depending on design.
          //Null value? (not included)
          //default values? (for params that are not included)
        },//"apiKey":"tBCVmR9e7NdzwN8K",
        //"token":"32f5263c88caff85d18fbd53fffff2e7",
        //"Params":{"Length":"10","Width":"10","Depth":"8","Allowance":"0.1875"},
      //  "unitSystemOverride":"imperial",
        options:{"user":{"saving":"simple"},"defaultLayout":{"showScores":true},

        "ui":{"saveButtonText":"Ajouter au panier","saveProgressText":"Enregistrement en cours...","saveFinishText":"Mod\u00e8le enregistr\u00e9",
        "savingDesignText":"Saving Your Design\u2026","studio":{"info":{"screenshotTooltip":"Enregistrer la capture d'\u00e9cran de la bo\u00eete"},

        "menu":{"delete":"Mod\u00e8le enregistr\u00e9","forward":"Avancer","front":"Amener vers l'avant","backwards":"Reculer","back":"Envoyer vers l'arri\u00e8re"},
        "ie":{"title":"D\u00e9sol\u00e9...","label":"La fonctionnalit\u00e9 principale de ce site n'est pas prise en charge par IE. Veuillez essayer une des m\u00e9thodes suivantes :",
        "chrome":"Chrome","firefox":"Firefox","Edge":"Edge\/Safari"},
        "loading":{"data":"Chargement des donn\u00e9es","resize":"Redimensionnement de votre mod\u00e8le","loading":"Chargement du mod\u00e8le 3D",
        "error":"WebGl n'est pas activ\u00e9. Veuillez l'activer pour utiliser cette fonctionnalit\u00e9."},
        "panel":{"inside":"","insideLabel":"","outside":"","outsideLabel":""},

        "legend":{"more":"Touches de raccourcis","shiftDrag":"Maj+faire glisser : Mettre \u00e0 l'\u00e9chelle proportionnellement le graphique",
        "delete":"DEL\/BKSP : Supprimer le graphique","save":"Crl+S : Enregistrer le graphique","mouseTitle":"Actions de la souris :","keyTitle":"Commandes principales :",
        "doubleClick":"Double-clic : Plier\/D\u00e9plier",
        "dragMouse":"D\u00e9placer la souris sur le mod\u00e8le : Pivoter en 3D","mouseWheel":"Molette de la souris : Zoom 3D","arrows":"Fl\u00e8che : D\u00e9placer le graphique",
        "duplicate":"Ctrl+D : Dupliquer le graphique","lines":"L : Activer\/D\u00e9sactiver les lignes d'incision"}},

        "resizer":{"info":{"title":"Mesures","label":"Afficher le mod\u00e8le de conversion","labelHint":"Mod\u00e8le de conversion","resetHint":"R\u00e9tablir les valeurs",
        "warning":"Redimensionnement requis pour appliquer les changements",
        "fieldError":"Ce champ accepte uniquement des entr\u00e9es num\u00e9riques et d\u00e9cimales. Veuillez r\u00e9essayer","select":"S\u00e9lectionner un mat\u00e9riau",
        "custom":"Personnalis\u00e9","title2":"Avanc\u00e9","resize":"Redimensionner","resizeLoading":"Redimensionnement de votre mod\u00e8le",
        "convertInches":"Convertir en pouces","convertMetric":"Convertir en m\u00e9trique"},

        "parameters":{"finish":"Terminer","material":"Type de carton","allowance":"Tol\u00e9rances","length":"Longueur","width":"Largeur","depth":"Profondeur",
        "slotLength":"Longueur de la section","slotSpacing":"Espace de la section","headerWidth":"Largeur de l'en-t\u00eate","headerHeight":"Hauteur de l'en-t\u00eate"}},
        "graphics":{"user":{"title":"Mes graphiques","upload":"Choisir un graphique","accepted":"Types de fichier accept\u00e9s : JPEG, JPG, PNG, SVG, PDF"},
        "standard":{"title":"Graphiques standards"},"text":{"title":"Ajouter du texte","label":"Texte","font":"Police de caract\u00e8res","color":"Couleur",
        "bold":"Gras","italic":"Italique"},"pattern":{"title":"Param\u00e8tres des couleurs et motifs","outsideColor":"Couleur ext\u00e9rieure",
        "outsidePattern":"Motif ext\u00e9rieur","insideColor":"Couleur interne","insidePattern":"Motif interne","showScores":"Afficher les incisions",
        "horizontal":"D\u00e9calage horizontal","vertical":"D\u00e9calage vertical","scale":"\u00c9chelle","rotation":"Rotation","none":"Enlever le motif",
        "close":"Fermer"},"panel":{"title":"Couleur du tableau12345678900","label":"Couleur du tableau",
        "instruction":"Choisissez une couleur, puis cliquez sur le tableau afin d'y appliquer la couleur s\u00e9lectionn\u00e9e. Cliquez de nouveau pour supprimer la couleur.",
        "buttonOutside":"Tout enlever (Ext\u00e9rieur)","buttonInside":"Tout enlever (interne)"},"litho":{"title":"Graphiques pleine page",
        "label":"Disponibles uniquement pour les graphiques ext\u00e9rieurs","instructions":"Instructions","upload":"Choisir un graphique"},
        "nonstandard":{"title":"Graphiques \u00e0 ligne"}},"initialTab":"resizer"},

        "resizer":{"enabled":true,"readonly":false,"modules":[],"trimParams":true,"editFluting":false},
        "export":{"enabled":false,"modules":[]},
        "graphics":{"enabled":true,"modules":["mod_standard","mod_graphics","mod_text","mod_color","mod_panel","mod_pattern","mod_litho"]},
        "views":{"3d":"3D","outside":"Vue ext\u00e9rieure","inside":"Vue interne"},"tabs":{"resizer":"Dimensions",
        "graphics":"Appliquer les graphiques"},"form":{"fields":{"Project Name":false},"hideAdvancedDims":true},

        "finishes":{"enable":true,"label":"Mati\u00e8res",
        "options":{"200#\/Kraft \u00e0 paroi double Carton \u00e0 cannelure C":{"id":380,"renderBase":"kraft","boardTypeId":"33","allowance":0.1875,"isDefault":"true"},
        "200#\/Kraft \u00e0 paroi simple Carton \u00e0 cannelure C":{"id":377,"renderBase":"kraft","boardTypeId":"33","allowance":0.1875,"isDefault":"false"},
        "275#\/Kraft \u00e0 paroi double Carton \u00e0 cannelure C":{"id":382,"renderBase":"kraft","boardTypeId":"38","allowance":0.256,"isDefault":"false"}}},

        "materials":{"enable":true},


      },






          //TODO: 12
          //Function event fires before or after action ( on success/error)?
          //e.g. buttonClick onSave or function return onSave?
    		onSave : function(userSessionHandle, parameters) {

          console.log(parameters);





          onSaveAction();

    		},

        //(optional)after studio is loaded
        onLoad: function(userSessionHandle) { //TODO: 13 not sure what userSessionHandle is supposed to have

          console.log(userSessionHandle);

          //$('#Params_Finish').trigger('change');



        },

        //(optional)user does a resize
        //TODO: 14
        //Function event fires before or after action ( on success/error)?
        onResize: function(userSessionHandle, parameters) {
          console.log(parameters);
          //alert(parameters.resizeToken);

          console.log("RESIZED ONSAVE CALLBACK");
        },

        //(required)
        //TODO: 15
        //onExport says 'required', but is not implemented anywhere (and doesn't seem to have a problem with that)
        //Are there any parameters for this function call?
        //Function event fires before or after action ( on success/error)?
        //
        /*
        onExport: function() {},
        */


        onTabsReady : function(state) {

          console.log("STATE IS :" + state);


    		},

        onTabsReadyAll : function(state) {

          console.log("STATE IS :" + state);

          if(document.getElementById('useInsideGraphics').value == 1){
              var x = $('.article.ac-colorSettings');
               $(x).addClass("tallWindow");
             }

    		},



      });
    });
  </script>
  <title>Page</title>
</head>

<body>
  <!-- BEGIN PAGE -->
  <div id='header'>

    <div id="nav" data-include="nav"></div>

  </div>


  <div id='body'>


    <div id='studio'></div>


    <div id="newUI">

      <button id="newSave">SAVE</button>

      <button id="newSaveAs">Save AS</button>

    </div>

  </div>

  <div id='footer'>
    footer
  </div>
  <!-- END PAGE -->



  <script type='text/javascript' src="js/dataInclude.js" ></script>

  <script>

  var response = -1;

  $(document).on('ready', function () {

    $('#newSave').on('click', function(){

      response = 0;
      console.log("New Save clicked"+response);
      $('.save_button').click();

    });

    $('#newSaveAs').on('click', function(){

      response = 1;
      console.log("New Save AS clicked"+response);
      $('.save_button').click();

    });


  });



  function onSaveAction(){

    console.log("Save ACTION called!" + response);

    if(response == 0){
      console.log("Response 0");
    }

    else if(response == 1){
      console.log("Response 1");
    }

    else{
      console.log("Response NONE");
    }


  }


  </script>
</body>

</html>
