<html>
    <head>
        <!-- BoxItNow CSS -->
        <link rel="stylesheet" type="text/css" href="http://localhost/css/bin.cache.min.css" />

        <!-- BoxItNow JS -->
        <script type="text/javascript" src="http://localhost/js/bin.bootstrap.min.js"></script>

        <!-- CLIENT CSS -->
        <!--<link rel="stylesheet" type="text/css" href="spectrum.css" />-->
        <link rel="stylesheet" type="text/css" href="base.css" />

        <!-- CLIENT JS -->

        <!-- You can pre load the following, BIN will load if they are not already loaded -->
        <!--<script type="text/javascript" src="//code.jquery.com/jquery-2.1.3.js"></script>-->
        <!--<script type="text/javascript" src="//code.jquery.com/ui/1.11.0/jquery-ui.js"></script>-->
        <!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r72/three.js"></script>-->
        <!--<script type="text/javascript" src="spectrum.js"></script>-->

        <!-- EXAMPLE USER INTEGRATION SCRIPT -->
        <script>
            
            function doExport(userToken, exportData) {
                //will go through save process already
                
                //userToken: use to match with client account
                //exportData: design files    
                /*
                 exportData: = {
                    name : STRING,
                    parameters : {
                       material : STRING
                       dimensions : {},
                       designRef : INT,
                    },
                    files : {
                        'hpgl' : URL,
                        'eps' : URL,
                        'dxf' : URL,
                        'cad' : URL,
                        '3d' : URL,
                        '2d' : URL
                    }
                 }
                 
                 
                 */
                
            }

            function doSave(userSessionHandle, completeSaveFunc) {
                /****** EXAMPLE INTEGRATION: *****/

                //CLIENT POPUP INTEGRATION
                if (confirm('Do you have an account? Press yes to login.')) {

                    //CLIENT LOGIN INTEGRATION
                    doLogin(function (userToken) {
                        //on complete finish save
                        completeSaveFunc(userSessionHandle, userToken);
                    });

                } else {

                    //CLIENT REGISTRATION INTEGRATION
                    doRegistration(function (userToken) {
                        //on complete finish save
                        completeSaveFunc(userSessionHandle, userToken);
                    });

                }
            }

            //client login example
            function doLogin(completeFunc) {
                //use credentials to login
                BIN.User.Login({username: 'test', password: 'test123'}, function (userToken) {
                    completeFunc(userToken);
                });
            }

            //client registration example
            function doRegistration(completeFunc) {
                //do client registration(frontend/backend)
                //do bin registration(backend)
                //use new credentials to login
                BIN.User.Login({username: 'test', password: 'test123'}, function (userToken) {
                    completeFunc(userToken);
                });
            }


        </script>


        <!-- EXAMPLE LOAD/CREATE SCRIPT -->
        <script>

            //LOAD bin libraries
            BIN.Bootstrap.load({
                //the root of the BIN HOST site
                api: 'http://localhost/'
            }, function () {

                //Begin create studio
                BIN.Widgets.CreateStudio({
                    //(require)Html div to attach the widget to
                    tag: $('#studio'),
                    //(require)design information to load
                    design: {
                        //(require) 'standard' or 'user'
                        type: 'standard',
                        //(require) id of item or resize
                        id: 60,
                        //(optional) required if loading user design
                        userToken: null,
                        //(optional) 
                        parameters : { length : "10.1", }
                    },
                    //(optional) for loading 
                    modules: {
                        //all optional default is true
                        resizer: {enabled: true},
                        graphics: {enabled: true},
                        export: {enabled: true}
                    },
                    //(optional)after studio is loaded
                    onLoad: function (userSessionHandle) {

                    },
                    //(optional)user does a resize
                    onResize: function (userSessionHandle, paramters) {

                    },
                    //(required)
                    onSave: doSave,
                    onExport : doExport

                });
            });
        </script>
        <title>Page</title>
    </head>
    <body>
        <!-- BEGIN PAGE -->
        <div id='header'>
            header
        </div>
        <div id='body'>
            <div id='tab'>tab</div>
            <div id='studio'></div>
        </div>
        <div id='footer'>
            footer
        </div>
        <!-- END PAGE -->
    </body>
</html>
